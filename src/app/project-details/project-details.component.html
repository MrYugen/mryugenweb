<section [class.dark]="isDarkMode" class="min-h-screen bg-bg text-text transition-colors duration-300">
    <app-navbar [isDarkMode]="isDarkMode" (toggleTheme)="toggleTheme()"></app-navbar>

    <!-- Hero reutilizable -->
    <app-hero *ngIf="project" [isDarkMode]="isDarkMode" [overlayOpacity]="project.overlayOpacity"
        [logoEffect]="project.logoEffect" [title]="project.title" [showTitle]="project.showTitle"
        [showCTA]="project.showCTA" [bgImageLight]="project.heroBgLight" [bgImageDark]="project.heroBgDark"
        [logoLight]="project.logoLight" [logoDark]="project.logoDark" [logoSize]="project.logoSize"
        [logoAlt]="project.title"></app-hero>

    <main class="max-w-5xl mx-auto py-10 px-4" style="background: var(--main-gradient);">

        <!-- 1. Resumen y Detalles del encargo -->
        <section id="resumen" class="reveal-section bg-section-a py-12 px-4 mb-16 text-center space-y-8 rounded-xl">
            <h1 class="text-4xl font-bold">{{ project.title }}</h1>
            <p class="text-lg leading-relaxed max-w-3xl mx-auto text-justify">{{ project.briefDescription }}</p>
            <ul class="text-lg leading-relaxed max-w-3xl mx-auto space-y-2">
                <li><span class="font-semibold">Cliente:</span> {{ project.clientName }}</li>
                <li><span class="font-semibold">Fecha:</span> {{ project.date }}</li>
                <li class="flex flex-wrap justify-center gap-4">
                    <span class="font-semibold w-full">Herramientas:</span>
                    <ng-container *ngFor="let tool of project.tools">
                        <figure class="flex flex-col items-center reveal-img">
                            <img [src]="tool.icon" [alt]="tool.name" class="w-8 h-8 mb-1" loading="lazy" />
                            <figcaption class="text-xs">{{ tool.name }}</figcaption>
                        </figure>
                    </ng-container>
                </li>
                <li><span class="font-semibold">Duración:</span> {{ project.duration }}</li>
            </ul>
        </section>

        <!-- 2. Investigación y Moodboard -->
        <section id="moodboard" class="reveal-section bg-section-b py-12 px-4 mb-16 space-y-8 text-center rounded-xl">
            <h2 class="text-2xl font-bold">Investigación & Moodboard</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 px-4">
                <img *ngFor="let imgUrl of project.moodboardImgs" [src]="imgUrl" [alt]="'Moodboard referencia'"
                    class="w-full object-cover rounded-xl shadow-lg cursor-pointer hover:scale-105 transition-transform"
                    (click)="openLightbox(imgUrl)" loading="lazy" />
            </div>
            <p class="text-lg leading-relaxed max-w-3xl mx-auto text-justify">{{ project.moodboardText }}</p>
        </section>

        <!-- 3. Bocetos y Diseño Final -->
        <section id="bocetos" class="reveal-section bg-section-a py-12 px-4 mb-16 space-y-6 text-center rounded-xl">
            <h2 class="text-2xl font-bold">Boceto & Diseño Final</h2>
            <div class="max-w-xl mx-auto">
                <app-before-after-slider [beforeImage]="project.bocetoImg" [afterImage]="project.finalImg"
                    altBefore="Boceto a lápiz" altAfter="Diseño final digital"></app-before-after-slider>
                <p class="text-xs text-gray-500 text-center mt-2">Desliza para ver el cambio</p>
            </div>
            <p class="text-lg leading-relaxed max-w-3xl mx-auto text-justify">{{ project.bocetoDescription }}</p>
        </section>

        <!-- 4. Entrega y Conclusiones (invertido) -->
        <section id="conclusiones"
            class="reveal-section bg-section-b py-12 px-4 mb-16 space-y-8 text-center rounded-xl">
            <h2 class="text-2xl font-bold">Entrega & Conclusiones</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 px-4">
                <img *ngFor="let mockUrl of project.mockups" [src]="mockUrl" [alt]="'Mockup final ' + project.title"
                    class="w-full object-cover rounded-xl shadow-lg cursor-pointer hover:scale-105 transition-transform"
                    (click)="openLightbox(mockUrl)" loading="lazy" />
            </div>
            <p class="text-lg leading-relaxed max-w-3xl mx-auto text-justify">{{ project.conclusionText }}</p>
            <a [routerLink]="['/']" fragment="contact"
                class="inline-block mt-4 px-6 py-3 rounded-full border border-cta text-cta font-semibold text-base bg-white/90 dark:bg-bg/80 hover:bg-cta hover:text-white transition-colors duration-300">
                {{ project.ctaText }}
            </a>
        </section>
    </main>

    <div *ngIf="lightboxOpen" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
        <div class="relative">
            <button class="absolute top-2 right-2 text-3xl text-orange-600" (click)="closeLightbox()"
                aria-label="Cerrar">×</button>
            <img [src]="activeImage" alt="Imagen ampliada" class="max-h-[90vh] rounded-xl shadow-xl" />
        </div>
    </div>



    <app-footer></app-footer>

    <app-scroll-to-top></app-scroll-to-top>

</section>