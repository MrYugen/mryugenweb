<div [class.dark]="isDarkMode"
  class="flex flex-col min-h-screen bg-bg text-text transition-colors duration-300 bg-cover bg-center"
  [ngStyle]="{ 'background-image': backgroundImage ? 'url(' + backgroundImage + ')' : '' }">
  <app-navbar class="hidden md:block" [isDarkMode]="isDarkMode" (toggleTheme)="toggleTheme()"></app-navbar>
  <app-mobile-navbar class="block md:hidden" [isDarkMode]="isDarkMode"
    (toggleTheme)="toggleTheme()"></app-mobile-navbar>


  <div class="flex-grow flex items-center">
    <div class="max-w-xl mx-8 text-left text-white bg-black/40 dark:bg-black/60 p-8 rounded-md">
      <h1 class="text-4xl font-bold mb-4">{{ title }}</h1>
      <h2 class="text-2xl mb-4">{{ subtitle }}</h2>
      <p class="mb-6">{{ message }}</p>

      <form (ngSubmit)="onNotify(subscribeForm)" #subscribeForm="ngForm" novalidate
        class="flex flex-col sm:flex-row sm:items-start gap-3">

        <div class="flex-1">
          <input type="email" name="email" [(ngModel)]="email" #emailCtrl="ngModel" required email
            placeholder="Tu correo" class="p-2 rounded w-full text-gray-900"
            [attr.aria-invalid]="emailCtrl.invalid && emailCtrl.touched ? true : null" />
          <p *ngIf="emailCtrl.invalid && emailCtrl.touched" class="mt-1 text-sm text-red-200">
            <span *ngIf="emailCtrl.errors?.['required']">El email es obligatorio.</span>
            <span *ngIf="emailCtrl.errors?.['email']">Introduce un email valido (nombre&#64;dominio.com).</span>
          </p>
        </div>

        <button type="submit" [disabled]="subscribeForm.invalid || isSubmitting"
          class="bg-cta text-white px-4 py-2 rounded sm:rounded-r sm:rounded-l-none">
          {{ isSubmitting ? 'Enviando...' : 'Notificame' }}
        </button>
      </form>

      <div class="mt-2 space-y-1" aria-live="polite">
        <p *ngIf="submitSuccessMessage" class="text-green-600 text-sm mt-2">{{ submitSuccessMessage }}</p>
        <p *ngIf="submitErrorMessage" class="text-red-600 text-sm mt-2">{{ submitErrorMessage }}</p>
      </div>

      <p class="text-xs text-white mt-4">Al enviar tu email aceptas nuestra
        <a routerLink="/politica-privacidad" class="underline">Pol√≠tica de Privacidad</a> y
        <a routerLink="/aviso-legal" class="underline">Aviso Legal</a>.
      </p>

    </div>
  </div>

  <app-footer></app-footer>
</div>