<div [class.dark]="isDarkMode" class="min-h-screen bg-bg text-text transition-colors duration-300 overflow-x-hidden">

    <app-navbar class="hidden md:block fixed w-full z-40 top-0" [isDarkMode]="isDarkMode"
        (toggleTheme)="toggleTheme()"></app-navbar>
    <app-mobile-navbar class="block md:hidden fixed w-full z-40 top-0" [isDarkMode]="isDarkMode"
        (toggleTheme)="toggleTheme()"></app-mobile-navbar>

    <app-hero [isDarkMode]="isDarkMode" [title]="'Recupera tu tiempo. Automatiza tu vida.'"
        [subtitle]="'Ya seas una empresa buscando eficiencia o un particular queriendo un mayordomo digital. La IA trabaja para ti.'"
        [bgImageLight]="'assets/images/automatizacion/automation-hero-light.jpg'"
        [bgImageDark]="'assets/images/automatizacion/automation-hero-dark.jpg'" [showCTA]="true"
        ctaText="Auditor√≠a Gratuita" ctaLink="#contacto" [overlayOpacity]="0.4">
    </app-hero>

    <section class="w-full bg-bg py-20 md:py-32 border-b border-gray-200 dark:border-white/5 reveal-section">
        <div class="max-w-screen-2xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">

            <div class="order-2 lg:order-1 space-y-2">
                <h2 class="text-xs font-bold tracking-[0.2em] text-cta uppercase mb-6">Workflow</h2>
                <h3 class="text-3xl md:text-5xl font-black mb-10 leading-tight">
                    De manual a <br> <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-600">Autom√°tico</span>
                </h3>

                <div class="space-y-4 relative">
                    <div class="absolute left-[19px] top-4 bottom-4 w-[2px] bg-gray-200 dark:bg-white/10"></div>

                    <div *ngFor="let step of methodologySteps; let i = index"
                        class="group relative pl-10 cursor-pointer transition-all duration-300"
                        (mouseenter)="activeStep = i" (click)="activeStep = i">

                        <div class="absolute left-[14px] top-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2 border-white dark:border-[#0f0f0f] transition-all duration-300 z-10"
                            [ngClass]="activeStep === i ? 'bg-cta scale-125' : 'bg-gray-300 dark:bg-gray-700'"></div>

                        <h4 class="text-xl md:text-2xl font-bold transition-colors duration-300 flex items-center gap-3"
                            [ngClass]="activeStep === i ? 'text-text' : 'text-text/40'">
                            <span class="text-sm font-mono opacity-50">0{{i}}</span> {{ step.title }}
                        </h4>

                        <div class="overflow-hidden transition-all duration-500 max-h-0 opacity-0"
                            [ngClass]="{'max-h-40 opacity-100 mt-2': activeStep === i}">
                            <p class="text-sm md:text-base text-text/70 leading-relaxed max-w-md">
                                {{ step.text }}
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="order-1 lg:order-2 h-[400px] md:h-[500px] w-full relative rounded-2xl overflow-hidden shadow-2xl border border-gray-200 dark:border-white/10">
                <ng-container *ngFor="let step of methodologySteps; let i = index">
                    <div class="absolute inset-0 w-full h-full transition-opacity duration-700 ease-in-out bg-black"
                        [ngClass]="activeStep === i ? 'opacity-100 z-10' : 'opacity-0 z-0'">
                        <img [src]="step.image" [alt]="step.title"
                            class="w-full h-full object-cover opacity-90 transition-transform duration-[10s] hover:scale-105"
                            loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-60"></div>
                    </div>
                </ng-container>
            </div>

        </div>
    </section>

    <section class="py-12 bg-bg-alt border-y border-gray-200 dark:border-white/5 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 mb-8 text-center">
            <p class="text-sm uppercase tracking-widest text-text/50 font-bold">Powered by Modern Tech</p>
        </div>

        <div
            class="scroller relative z-10 max-w-full overflow-hidden [mask-image:linear-gradient(to_right,transparent,white_10%,white_90%,transparent)]">
            <div class="scroller-inner flex gap-16 py-4 w-max animate-scroll">
                <ng-container *ngFor="let item of techStack">
                    <div class="flex items-center gap-3 opacity-60 grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-300 cursor-help"
                        [title]="item.name">
                        <img [src]="item.icon" [alt]="item.name" class="h-10 w-auto object-contain max-w-[120px]">
                    </div>
                </ng-container>
                <ng-container *ngFor="let item of techStack">
                    <div
                        class="flex items-center gap-3 opacity-60 grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-300">
                        <img [src]="item.icon" [alt]="item.name" class="h-10 w-auto object-contain max-w-[120px]">
                    </div>
                </ng-container>
            </div>
        </div>
    </section>

    <section class="py-24 px-4 bg-bg reveal-section">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-5xl font-black mb-4">Automatizaci√≥n para <span class="text-cta">Todos</span>
                </h2>
                <p class="text-xl text-text/70">Tanto si facturas millones como si solo quieres organizar tu nevera.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-8 items-start">
                <div class="lg:col-span-4 flex flex-col gap-2 sticky top-24">
                    <button *ngFor="let useCase of useCases; let i = index" (click)="setUseCase(i)"
                        class="text-left px-6 py-5 rounded-xl transition-all duration-300 flex items-center gap-4 border-l-4 group"
                        [ngClass]="activeUseCase === i 
                                ? 'bg-bg-alt border-cta shadow-lg translate-x-2' 
                                : 'border-transparent hover:bg-gray-50 dark:hover:bg-white/5 opacity-70 hover:opacity-100'">
                        <span class="text-2xl group-hover:scale-110 transition-transform">{{ useCase.icon }}</span>
                        <div>
                            <span class="font-bold block">{{ useCase.title }}</span>
                            <span class="text-xs text-text/50 uppercase tracking-wider font-bold">{{ useCase.category
                                }}</span>
                        </div>
                    </button>
                </div>

                <div class="lg:col-span-8">
                    <div
                        class="min-h-[500px] bg-bg-alt rounded-3xl p-8 md:p-12 border border-gray-200 dark:border-white/5 shadow-2xl relative overflow-hidden transition-all">
                        <div
                            class="absolute top-0 right-0 w-80 h-80 bg-cta/5 rounded-full blur-[100px] transition-colors duration-500">
                        </div>

                        <div class="relative z-10 animate-fade-in" *ngIf="useCases[activeUseCase]">
                            <div class="flex items-center gap-4 mb-6">
                                <span class="text-4xl">{{ useCases[activeUseCase].icon }}</span>
                                <h3 class="text-3xl md:text-4xl font-bold">{{ useCases[activeUseCase].title }}</h3>
                            </div>

                            <p class="text-xl text-text/80 mb-10 leading-relaxed border-l-4 border-cta/30 pl-6">
                                {{ useCases[activeUseCase].description }}
                            </p>

                            <h4
                                class="text-xs uppercase tracking-widest font-bold text-cta mb-6 flex items-center gap-2">
                                <span class="w-8 h-[1px] bg-cta"></span> Ejemplos de implementaci√≥n
                            </h4>

                            <div class="grid sm:grid-cols-1 gap-4">
                                <div *ngFor="let point of useCases[activeUseCase].points"
                                    class="group p-4 bg-bg rounded-xl border border-gray-200 dark:border-white/5 hover:border-cta/30 transition-all hover:shadow-md">
                                    <div class="font-bold mb-1 flex items-center gap-2">
                                        <span class="text-green-500">‚ö°</span> {{ point.title }}
                                    </div>
                                    <p class="text-sm text-text/60 pl-6">{{ point.desc }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 px-4 reveal-section">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-3xl md:text-5xl font-black text-center mb-16">C√≥mo puedo ayudarte</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div
                    class="lg:col-span-2 group p-8 md:p-10 rounded-3xl bg-bg-alt border border-gray-200 dark:border-white/10 hover:border-cta/50 transition-all duration-300 hover:shadow-2xl">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 text-blue-500 flex items-center justify-center text-3xl mb-6">
                        üîç</div>
                    <h3 class="text-2xl font-bold mb-3">Auditor√≠a & Consultor√≠a</h3>
                    <p class="text-text/70 mb-6 leading-relaxed max-w-2xl">
                        Analizo tus flujos de trabajo (personales o empresariales). Encuentro d√≥nde pierdes tiempo y
                        dise√±o una hoja de ruta para automatizarlo. Te entrego un plan de acci√≥n claro y sin
                        tecnicismos.
                    </p>
                    <span class="text-xs font-bold uppercase tracking-widest text-blue-500">Estrategia</span>
                </div>

                <div
                    class="group p-8 rounded-3xl bg-bg-alt border border-gray-200 dark:border-white/10 hover:border-cta/50 transition-all duration-300 hover:shadow-xl">
                    <div
                        class="w-14 h-14 rounded-2xl bg-purple-500/10 text-purple-500 flex items-center justify-center text-3xl mb-6">
                        ü§ñ</div>
                    <h3 class="text-xl font-bold mb-3">Bots a Medida</h3>
                    <p class="text-sm text-text/70 mb-6">Scripts en Python, bots de Telegram/Discord o Scrapers web que
                        trabajan 24/7 sin descanso.</p>
                    <span class="text-xs font-bold uppercase tracking-widest text-purple-500">C√≥digo</span>
                </div>

                <div
                    class="group p-8 rounded-3xl bg-bg-alt border border-gray-200 dark:border-white/10 hover:border-cta/50 transition-all duration-300 hover:shadow-xl">
                    <div
                        class="w-14 h-14 rounded-2xl bg-orange-500/10 text-orange-500 flex items-center justify-center text-3xl mb-6">
                        ‚ö°</div>
                    <h3 class="text-xl font-bold mb-3">Integraciones No-Code</h3>
                    <p class="text-sm text-text/70 mb-6">Conecto tus apps (Notion, Gmail, Calendar, Excel) para que los
                        datos viajen solos.</p>
                    <span class="text-xs font-bold uppercase tracking-widest text-orange-500">Make / Zapier</span>
                </div>

                <div
                    class="group p-8 rounded-3xl bg-bg-alt border border-gray-200 dark:border-white/10 hover:border-cta/50 transition-all duration-300 hover:shadow-xl">
                    <div
                        class="w-14 h-14 rounded-2xl bg-green-500/10 text-green-500 flex items-center justify-center text-3xl mb-6">
                        üéì</div>
                    <h3 class="text-xl font-bold mb-3">Formaci√≥n In-Company</h3>
                    <p class="text-sm text-text/70 mb-6">Talleres pr√°cticos para que tu equipo pierda el miedo a la IA y
                        aprenda a usar ChatGPT productivamente.</p>
                    <span class="text-xs font-bold uppercase tracking-widest text-green-500">Workshops</span>
                </div>

                <div
                    class="group p-8 rounded-3xl bg-gradient-to-br from-cta/20 to-bg-alt border border-cta/30 hover:border-cta transition-all duration-300 hover:shadow-xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 px-3 py-1 bg-cta text-white text-xs font-bold rounded-bl-xl">
                        POPULAR</div>
                    <div class="w-14 h-14 rounded-2xl bg-cta text-white flex items-center justify-center text-3xl mb-6">
                        ü§ù</div>
                    <h3 class="text-xl font-bold mb-3">Mentor√≠a 1 a 1</h3>
                    <p class="text-sm text-text/70 mb-6">Sesiones privadas conmigo. Aprende IA desde cero o solucionemos
                        un problema t√©cnico concreto juntos.</p>
                    <span class="text-xs font-bold uppercase tracking-widest text-cta">Personalizado</span>
                </div>
            </div>
        </div>
    </section>

    <section id="contacto"
        class="py-20 px-4 bg-gradient-to-b from-bg to-bg-alt border-t border-gray-200 dark:border-white/5">
        <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-16">

            <div>
                <h2 class="text-3xl font-black mb-8">Dudas Frecuentes</h2>
                <div class="space-y-4">
                    <div *ngFor="let item of faqs; let i = index"
                        class="border border-gray-200 dark:border-white/10 rounded-2xl bg-bg overflow-hidden group">
                        <button (click)="toggleFaq(i)"
                            class="w-full text-left px-6 py-5 font-bold flex justify-between items-start gap-4 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors">
                            <span class="text-lg leading-tight">{{ item.question }}</span>
                            <span
                                class="text-cta text-2xl leading-none transform transition-transform duration-300 shrink-0"
                                [class.rotate-45]="isFaqOpen(i)">+</span>
                        </button>
                        <div class="px-6 text-text/70 overflow-hidden transition-all duration-300 whitespace-pre-line"
                            [style.max-height]="isFaqOpen(i) ? '500px' : '0px'"
                            [style.padding-bottom]="isFaqOpen(i) ? '1.5rem' : '0px'">
                            {{ item.answer }}
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="bg-bg border border-gray-200 dark:border-white/10 p-8 md:p-10 rounded-3xl shadow-2xl relative sticky top-24">
                <div
                    class="absolute -top-10 -right-10 w-40 h-40 bg-cta/20 rounded-full blur-[60px] pointer-events-none">
                </div>

                <h3 class="text-2xl font-bold mb-2">Empieza hoy</h3>
                <p class="text-text/60 mb-8">Cu√©ntame qu√© te quita el sue√±o. Primera consulta gratuita.</p>

                <form (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm" class="space-y-5 relative z-10">
                    <div>
                        <label class="block text-xs uppercase font-bold text-text/50 mb-1">Nombre</label>
                        <input type="text" name="name" [(ngModel)]="name" required
                            class="w-full bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-cta transition-colors">
                    </div>
                    <div>
                        <label class="block text-xs uppercase font-bold text-text/50 mb-1">Email</label>
                        <input type="email" name="email" [(ngModel)]="email" required email
                            class="w-full bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-cta transition-colors">
                    </div>
                    <div>
                        <label class="block text-xs uppercase font-bold text-text/50 mb-1">Tu Reto (¬øEmpresa o
                            Particular?)</label>
                        <textarea name="message" [(ngModel)]="message" rows="4" required
                            placeholder="Ej: Quiero automatizar mis facturas o quiero organizar mis estudios..."
                            class="w-full bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-cta transition-colors"></textarea>
                    </div>

                    <div class="flex items-start gap-3 pt-2">
                        <input type="checkbox" name="newsletter" [(ngModel)]="newsletter"
                            class="mt-1 accent-cta w-4 h-4">
                        <p class="text-xs text-text/60 leading-tight">S√≠, env√≠ame trucos de automatizaci√≥n (0 spam,
                            prometido).</p>
                    </div>

                    <button type="submit" [disabled]="submitting || contactForm.invalid"
                        class="w-full py-4 bg-cta text-white font-bold rounded-xl shadow-lg hover:shadow-orange-500/30 hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-lg">
                        {{ submitting ? 'Enviando...' : 'Solicitar Auditor√≠a' }}
                    </button>

                    <p *ngIf="submitSuccess" class="text-green-500 text-center font-bold text-sm mt-2 animate-bounce">{{
                        submitSuccessMessage }}</p>
                </form>
            </div>

        </div>
    </section>

    <app-footer></app-footer>
    <app-scroll-to-top></app-scroll-to-top>
</div>