<div [class.dark]="isDarkMode" class="min-h-screen bg-bg text-text transition-colors duration-300" *ngIf="post">
    <app-navbar class="hidden md:block" [isDarkMode]="isDarkMode" (toggleTheme)="toggleTheme()"></app-navbar>
    <app-mobile-navbar class="block md:hidden" [isDarkMode]="isDarkMode"
        (toggleTheme)="toggleTheme()"></app-mobile-navbar>


    <article class="max-w-3xl mx-auto py-16 px-4">
        <h1 class="text-4xl font-bold mb-4">{{ post.title }}</h1>
        <p class="text-sm text-text/70 mb-6">{{ post.date | date:'mediumDate' }} - {{ post.author }}</p>
        <img [src]="post.image" [alt]="post.title" class="w-full rounded-lg mb-8" loading="lazy" />
        <div class="post-content" [innerHTML]="post.content"></div>

        <!-- Compartir -->
        <div class="flex space-x-4 mt-8">
            <a [href]="'https://www.facebook.com/sharer/sharer.php?u=' + currentUrl" target="_blank"
                rel="noopener noreferrer" class="px-4 py-2 rounded bg-cta text-white"
                aria-label="Compartir en Facebook">Facebook</a>
            <a [href]="'https://twitter.com/intent/tweet?url=' + currentUrl" target="_blank" rel="noopener noreferrer"
                class="px-4 py-2 rounded bg-cta text-white" aria-label="Compartir en X">Twitter/X</a>
            <a [href]="'https://www.linkedin.com/shareArticle?mini=true&url=' + currentUrl" target="_blank"
                rel="noopener noreferrer" class="px-4 py-2 rounded bg-cta text-white"
                aria-label="Compartir en LinkedIn">LinkedIn</a>
        </div>

        <!-- Newsletter -->
        <section class="mt-12 p-6 rounded-lg border border-text/10 bg-bg-alt">
            <form (ngSubmit)="onSubscribe()" #subscribeForm="ngForm" class="flex flex-col gap-3">
                <label for="newsletterEmail" class="text-sm font-medium">Suscribete al newsletter semanal</label>
                <input id="newsletterEmail" name="email" type="email" [(ngModel)]="email" required
                    placeholder="Tu mejor email"
                    class="w-full px-4 py-2 rounded border border-text/20 bg-bg text-text focus:outline-none focus:ring-2 focus:ring-cta"
                    aria-label="Introduce tu email para suscribirte al newsletter" />

                <button type="submit" class="px-5 py-2 rounded bg-cta text-white font-semibold disabled:opacity-60"
                    [disabled]="submitting || !subscribeForm.form.valid" aria-label="Suscribirme al newsletter">
                    {{ submitting ? 'Suscribiendo...' : 'Suscribirme' }}
                </button>

                <p *ngIf="successMessage" class="text-green-600 text-sm">{{ successMessage }}</p>
                <p *ngIf="errorMessage" class="text-red-600 text-sm">{{ errorMessage }}</p>

                <p class="text-xs text-text/70">Al suscribirte, aceptas recibir el newsletter semanal y confirmas que
                    has leído y aceptas nuestros
                    <a routerLink="/condiciones-generales" class="underline">Términos y Condiciones</a> y la
                    <a routerLink="/politica-privacidad" class="underline">Política de Privacidad</a>.
                </p>
            </form>
        </section>
        <div class="mt-12">
            <a routerLink="/blog" class="text-cta font-semibold">Volver al blog</a>
        </div>
    </article>

    <app-footer></app-footer>
    <app-scroll-to-top></app-scroll-to-top>
</div>